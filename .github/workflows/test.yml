name: test
on:
  pull_request:
    types: [opened, synchronize, reopened]

jobs:
  test:
    runs-on: ubuntu-24.04
    steps:
      - name: direct test
        shell: bash
        run: |
          mkdir test
          cd test
          curl https://storage.googleapis.com/splice-nix-cache-public/48461acabd81ff985f7de6e4a32efb29.tar.gz -o b.tar.gz

      - name: test zstd
        shell: bash
        run: |
          ls -l b.tar.gz
          tar -xzf b.tar.gz
          rm b.tar.gz
          tar -I zstd -cf a.tar.zst *
          ls -l a.tar.zst
          mkdir temp2
          mv a.tar.zst temp2/
          cd temp2
          tar -I zstd -xf a.tar.zst
          ls -l
