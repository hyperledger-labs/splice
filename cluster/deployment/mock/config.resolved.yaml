# This file is generated automatically. Do not edit directly.
cloudArmor:
  allRulesPreviewOnly: true
  enabled: false
  publicEndpoints:
    publicScan:
      hostname: 'scan.sv-2.scratcha.global.canton.network.digitalasset.com'
      pathPrefix: '/api/scan'
      throttleAcrossAllEndpointsAllIps:
        maxRequestsBeforeHttp429: 0
        withinIntervalSeconds: 60
cluster:
  nodePools:
    apps:
      maxNodes: 20
      minNodes: 0
      nodeType: 'n2-standard-16'
    infra:
      maxNodes: 3
      minNodes: 1
      nodeType: 'e2-standard-8'
infra:
  extraCustomResources:
    deny-onboard-prepare-endpoint:
      apiVersion: 'security.istio.io/v1'
      kind: 'AuthorizationPolicy'
      metadata:
        name: 'deny-onboard-prepare-endpoint'
        namespace:
          - 'sv-1'
          - 'sv-2'
      spec:
        action: 'DENY'
        rules:
          - to:
              - operation:
                  paths:
                    - '/api/sv/v0/devnet/onboard/validator/prepare'
        selector:
          matchLabels:
            app: 'sv-app'
    mock-cr:
      apiVersion: 'mock.example.com/v1'
      kind: 'MockResource'
      metadata:
        name: 'mock-resource'
        namespace: 'validator1'
      spec:
        anotherKey: 'anotherValue'
        key: 'value'
  istio:
    enableIngressAccessLogging: true
  prometheus:
    retentionDuration: '1y'
    retentionSize: '1500GB'
    storageSize: '2Ti'
initialRound: 0
loadTester:
  adaptiveScenario:
    enabled: true
  chartVersion: '1.2.3'
  enable: true
  iterationsPerMinute: 30
  minRate: 0.123
monitoring:
  alerting:
    alerts:
      cloudSql:
        maintenance: true
      cometbft:
        expectedMaxBlocksPerSecond: 3.5
      confirmationRequests:
        perMember:
          overMinutes: 5
          rate: 3
        total:
          overMinutes: 5
          rate: 15
      delegatelessContention:
        thresholdPerNamespace: 0.05
      ingestion:
        thresholdEntriesPerBatch: 80
      loadTester:
        minRate: 0.95
      mediators:
        acknowledgementLagSeconds: 900
      pruning:
        mediatorRetentionDays: 30
        participantRetentionDays: 30
        sequencerRetentionDays: 30
      svNames:
        - 'Dummy-SV-1'
        - 'Dummy-SV-2'
      trafficWaste:
        kilobytes: 1
        overMinutes: 5
        quantile: 0.95
    enableNoDataAlerts: true
    logAlerts:
      forCometBft: "-(resource.labels.container_name=\"multi-validator\" AND jsonPayload.message=~\"wallet/transfer-offers.* resulted in a timeout\")\n"
      forNonTAPS: "-(resource.labels.container_name=\"multi-participant\" AND jsonPayload.message=~\"The sequencer clock timestamp.*is already past the max sequencing time\")\n-(jsonPayload.\"span-name\"=\"MergeValidatorLicenseContractsTrigger\" AND (severity=WARNING OR \"has not vetted\"))\n-(jsonPayload.\"error-code\"=~\"ACS_COMMITMENT_MISMATCH\" AND jsonPayload.remote=~\"tw-cn-testnet-participant\")\n"
      missingConfiguredCardinality: "-(jsonPayload.message=\"Instrument splice.trigger.latency.duration.seconds has exceeded the maximum allowed cardinality (1999).\")\n"
multiValidator:
  extraParticipantEnvVars:
    - name: 'MULTI_PARTICIPANT_ADDITIONAL_CONFIG_MAX_CONNECTIONS'
      value: 'canton.participants.participant_INDEX.storage.parameters.max-connections = 33'
  extraValidatorEnvVars:
    - name: 'MULTI_VALIDATOR_ADDITIONAL_CONFIG_YOLO'
      value: "canton.validator-apps.validator_backend_INDEX.automation.paused-triggers += \"org.lfdecentralizedtrust.splice.wallet.automation.ExpireTransferOfferTrigger\"\ncanton.validator-apps.validator_backend_INDEX.automation.paused-triggers += \"org.lfdecentralizedtrust.splice.wallet.automation.ExpireAcceptedTransferOfferTrigger\"\n"
  postgresPvcSize: '100Gi'
  resources:
    participant:
      limits:
        memory: '16Gi'
      requests:
        cpu: '1'
        memory: '8Gi'
    postgres:
      limits:
        memory: '12Gi'
      requests:
        memory: '5Gi'
    validator:
      limits:
        memory: '8Gi'
      requests:
        cpu: '0.5'
        memory: '2400Mi'
networkWide:
  maxVettingDelay: '1m'
operatorDeployment:
  reference:
    deploymentDir: 'cluster/deployment'
    gitReference: 'refs/heads/main'
    privateConfigsDir: 'cluster/configs/configs-private'
    publicConfigsDir: 'cluster/configs/configs'
    pulumiBaseDir: 'splice/cluster/pulumi'
    pulumiStacksDir: 'cluster/stacks/prod'
    repoUrl: 'https://github.com/DACH-NY/canton-network-internal'
    spliceRoot: 'splice'
pulumiProjectConfig:
  default:
    allowDowngrade: true
    cloudSql:
      enabled: true
      enterprisePlus: false
      protected: true
      tier: 'db-custom-2-7680'
    hasPublicInfo: true
    installDataOnly: false
    interAppsDependencies: false
    isExternalCluster: true
    skipSynchronizerInitialization: true
  sv-runbook:
    cloudSql:
      enabled: false
pulumiStacks:
  default:
    parallelism: 64
  multi-validator:
    parallelism: 10
splitwell:
  maxDarVersion: '0.1.8'
sv:
  scan:
    externalRateLimits:
      globalLimits:
        fillInterval: '60s'
        maxTokens: 2147483647
        tokensPerFill: 2147483647
      rateLimits:
        - actions:
            - name: 'acs'
              pathPrefix: '/api/scan/v0/acs'
            - clientIp: true
              name: 'client_ip'
          limits:
            fillInterval: '60s'
            maxTokens: 10
            tokensPerFill: 5
  synchronizer:
    skipInitialization: true
svs:
  default:
    logging:
      appsAsync: false
      appsLogLevel: 'WARN'
      cantonAsync: false
      cantonLogLevel: 'INFO'
      cantonStdoutLogLevel: 'DEBUG'
      cometbftLogLevel: 'debug'
    mediator:
      additionalEnvVars:
        - name: 'CUSTOM_MOCK_ENV_VAR_NAME'
          value: 'CUSTOM_MOCK_ENV_VAR_VALUE'
      additionalJvmOptions: '-DcustomMediatorJvmFlag'
      resources:
        limits:
          memory: '2Gi'
        requests:
          cpu: '1'
          memory: '1Gi'
    participant:
      additionalEnvVars:
        - name: 'CUSTOM_MOCK_ENV_VAR_NAME'
          value: 'CUSTOM_MOCK_ENV_VAR_VALUE'
      additionalJvmOptions: '-DcustomParticipantJvmFlag'
      bftSequencerConnection: true
      resources:
        limits:
          memory: '18Gi'
        requests:
          memory: '12Gi'
    scanApp:
      additionalEnvVars:
        - name: 'CUSTOM_MOCK_ENV_VAR_NAME'
          value: 'CUSTOM_MOCK_ENV_VAR_VALUE'
      additionalJvmOptions: '-DcustomScanAppJvmFlag'
      resources:
        limits:
          memory: '2048Mi'
        requests:
          cpu: '0.5'
          memory: '1536Mi'
    sequencer:
      additionalEnvVars:
        - name: 'CUSTOM_MOCK_ENV_VAR_NAME'
          value: 'CUSTOM_MOCK_ENV_VAR_VALUE'
      additionalJvmOptions: '-DcustomSequencerJvmFlag'
      cloudSql:
        tier: 'sequencer-override-tier'
      resources:
        limits:
          memory: '2Gi'
        requests:
          cpu: '1'
          memory: '1Gi'
    svApp:
      additionalEnvVars:
        - name: 'CUSTOM_MOCK_ENV_VAR_NAME'
          value: 'CUSTOM_MOCK_ENV_VAR_VALUE'
      additionalJvmOptions: '-DcustomSvAppJvmFlag'
      resources:
        limits:
          memory: '2Gi'
        requests:
          cpu: '1'
          memory: '1Gi'
    validatorApp:
      additionalEnvVars:
        - name: 'ADDITIONAL_CONFIG_TOPOLOGY_METRICS_EXPORT'
          value: "canton.validator-apps.validator_backend.automation.topology-metrics-polling-interval = 5m\n"
      resources:
        limits:
          memory: '4Gi'
        requests:
          memory: '2Gi'
  sv:
    participant:
      bftSequencerConnection: false
  sv-1:
    logging:
      appsLogLevel: 'WARN'
      cantonLogLevel: 'INFO'
      cantonStdoutLogLevel: 'DEBUG'
    scanApp:
      bigQuery:
        dataset: 'mock_da2_scan'
        prefix: 'da2'
  sv-da-1:
    cometbft:
      keysGcpSecret: 'svda1-mock-cometbft-keys'
      nodeId: 'd825622358065aea3cb3b3479cf64d172675037e'
      validatorKeyAddress: '2D21D8AB2306770E9F93E8BD0E0F07B3E86817D7'
    logging:
      appsLogLevel: 'INFO'
      cantonLogLevel: 'INFO'
    participant:
      kms:
        keyRingId: 'sv-da-1_participant_mock'
        locationId: 'us-central1'
    publicName: 'Digital-Asset-1'
    subdomain: 'sv-1'
    svApp:
      auth0:
        clientId: 'bxjt0vzLyRG2rk2fapXfOzH5lzK4mrl7'
      cometBftGovernanceKeyGcpSecret: 'svda1-mock-cometbft-governance-key'
      svIdKeyGcpSecret: 'svda1-mock-id'
    validatorApp:
      auth0:
        clientId: 'fBFpzZSRuufk9ueV2pSEkOXNYXuQtVmY'
      sweep:
        fromEnv: 'SVDA1'
      walletUser: 'auth0|68c2c41e6470184569e4521e'
synchronizerMigration:
  active:
    id: 3
    releaseReference:
      deploymentDir: 'cluster/deployment'
      gitReference: 'refs/heads/release-line-0.3.20'
      privateConfigsDir: 'cluster/configs/configs-private'
      publicConfigsDir: 'cluster/configs/configs'
      pulumiBaseDir: 'splice/cluster/pulumi'
      pulumiStacksDir: 'cluster/stacks/prod'
      repoUrl: 'https://github.com/hyperledger-labs/splice'
      spliceRoot: 'splice'
    version: '0.3.20'
  archived:
    - id: 1
      releaseReference:
        deploymentDir: 'cluster/deployment'
        gitReference: '981227e62011e386cca3cdb5f00b472cf05a12c4'
        pulumiBaseDir: 'splice/cluster/pulumi'
        pulumiStacksDir: 'cluster/stacks/prod'
        repoUrl: 'https://github.com/hyperledger-labs/splice'
        spliceRoot: 'splice'
      version: '0.3.18'
    - id: 2
      releaseReference:
        deploymentDir: 'cluster/deployment'
        gitReference: 'refs/heads/release-line-0.3.19'
        pulumiBaseDir: 'splice/cluster/pulumi'
        pulumiStacksDir: 'cluster/stacks/prod'
        repoUrl: 'https://github.com/hyperledger-labs/splice'
        spliceRoot: 'splice'
      version: '0.3.19'
  upgrade:
    id: 4
    releaseReference:
      deploymentDir: 'cluster/deployment'
      gitReference: 'refs/heads/release-line-0.3.21'
      privateConfigsDir: 'cluster/configs/configs-private'
      publicConfigsDir: 'cluster/configs/configs'
      pulumiBaseDir: 'splice/cluster/pulumi'
      pulumiStacksDir: 'cluster/stacks/prod'
      repoUrl: 'https://github.com/hyperledger-labs/splice'
      spliceRoot: 'splice'
    version: '0.3.21'
validator1:
  kms:
    keyRingId: 'validator1_mock'
    locationId: 'us-central1'
    projectId: 'da-cn-devnet'
    type: 'gcp'
  logging:
    level: 'DEBUG'
validators:
  extra-validator:
    namespace: 'validator'
    partyHint: 'extra-validator'
  validator-runbook:
    namespace: 'validator'
    nodeIdentifier: 'validator-runbook'
    onboardingSecret: 'validatorsecret'
    participant:
      additionalEnvVars:
        - name: 'ADDITIONAL_ENV_VAR_VALIDATOR_PARTICIPANT_NAME'
          value: 'ADDITIONAL_ENV_VAR_VALIDATOR_PARTICIPANT_VALUE'
      additionalJvmOptions: '-Dparticipantoption'
    partyAllocator:
      enable: true
      maxParties: 1234
      parallelism: 321
      preapprovalRetries: 9876
      preapprovalRetryDelayMs: 42
    partyHint: 'digitalasset-testValidator-1'
    validatorApp:
      additionalEnvVars:
        - name: 'ADDITIONAL_ENV_VAR_VALIDATOR_NAME'
          value: 'ADDITIONAL_ENV_VAR_VALIDATOR_NAME'
      additionalJvmOptions: '-Dparticipantoption'
