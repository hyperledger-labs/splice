{
  include required("../splice-instance-names.conf")

  storage = ${_shared.storage}
  storage {
    config {
      properties = {
        databaseName = "splice_apps"
      }
    }
  }
  admin-api.address = 0.0.0.0
  participant-client {
    ledger-api.auth-config.type = "none"
  }

  parameters {
    circuit-breakers {
      # increase the max-failures in tests as things can be flaky
      medium-priority {
        max-failures = 20
      }
      low-priority {
        max-failures = 20
      }
    }
    custom-timeouts {
      # names should match those of the OpenAPI definition
      getAcsSnapshot = 1 minute
    }
    rate-limiting {
      default {
        rate-per-second = 200
      }
      rate-limiters {
        getAcsSnapshot.rate-per-second = 2
        # High defaults as we call this from UpdateHistorySanityCheckPlugin
        getDateOfMostRecentSnapshotBefore.rate-per-second = 400
        getAcsSnapshotAt.rate-per-second = 400
      }
    }
  }

  # Reduce in tests as SVs change relatively frequently here.
  cache {
      sv-node-state {
       ttl = 1s
       max-size = 1
      }
      amulet-rules {
       ttl = 1s
       max-size = 1
      }
      ans-rules {
       ttl = 1s
       max-size = 1
      }
      total-rewards-collected {
       ttl = 1s
       max-size = 1
      }
      rewards-collected-in-round {
       ttl = 1s
       max-size = 1
      }
      amulet-config-for-round {
       ttl = 1s
       max-size = 1
      }
      round-of-latest-data {
       ttl = 1s
       max-size = 1
      }
      top-providers-by-app-rewards {
       ttl = 1s
       max-size = 1
      }
      top-validators {
       ttl = 1s
       max-size = 1
      }
      validator-license-by-validator {
       ttl = 1s
       max-size = 1
      }
      total-purchased-member-traffic {
       ttl = 1s
       max-size = 1
      }
      cached-by-party {
       ttl = 1s
       max-size = 1
      }
      aggregated-rounds {
       ttl = 1s
       max-size = 1
      }
      round-totals {
       ttl = 1s
       max-size = 1
      }
      vote-requests {
       ttl = 1s
       max-size = 1
      }
      open-mining-rounds {
       ttl = 1s
       max-size = 1
      }
  }

}
